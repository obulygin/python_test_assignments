# Тестовое задание в команду продуктовой аналитики.

***

## ЗАДАНИЕ

В  вашем распоряжении 2 датасета.

data\_orders содержит выборку данных по заказам пользователей и включает такие колонки как:

| Field name                       | Description                                                                              |
| -------------------------------- | ---------------------------------------------------------------------------------------- |
| order\_datetime                  | время заказа                                                                             |
| origin\_longitude                | долгота                                                                                  |
| origin\_latitude                 | широта                                                                                   |
| m\_order\_eta                    | время до прибытия машины                                                                 |
| order\_gk                        | номер заказа                                                                             |
| order\_status\_key               | статус (4 - отменен клиентом, 9 - отменен системой (reject))                             |
| is\_driver\_assigned\_key        | был ли назначен водитель                                                                 |
| cancellations\_time\_in\_seconds | сколько секунд прошло до отмены                                                          |
| data\_offers                     | содержит пары номер заказа - ID оффера, который был предложен водителю по данному заказу |
| order\_datetime                  | время заказа                                                                             |
| order\_datetime                  | время заказа                                                                             |

data\_offers - содержит пары номер заказа - ID оффера, который был предложен водителю по данному заказу.

В момент когда клиент нажимает на кнопку "Заказать" в приложении, система матчинга подыскивает наиболее релевантных водителей и предлагаем им заказ. В задании предлагается исследовать некоторые метрики матчинга для заказов, которые не завершились успешно (клиент в итоге не получил машину).

***

### ВАШИ ЗАДАЧИ

1. Подготовьте данные;
2. Постройте распределение заказов по причинам неуспеха: отмены до и после назначения водителя, режекты;
3. Проанализируйте полученный график - в какой категории наибольшее количество заказов?
4. Постройте графики среднего времени до отмены (cancellations\_time\_in\_seconds) с водителем и без, по часам. Если есть выбросы в данных - лучше удалить. Можно ли сделать выводы по этому графику?
5. Постройте распределение среднего ЕТА по часам. Чем можно объяснить такой вид графика?
6. Колонка drivers\_offered - показывает сколько водителей увидели заказ и могли его принять. Постройте часовую разбивку среднего количества водителей которым был предложен заказ. Что можно сказать по ней про избыток/нехватку водителей в те или иные часы?
7. Воспользовавшись пакетами [h3 ](https://h3geo.org/docs/)и [folium](https://python-visualization.github.io/folium/latest/), посчитайте, сколько гексагонов размера 8 содержат 80% всех заказов из исходного датасета и сделайте визуализацию гексагон с наибольшим количеством фейлов на карте.

***

### ТЕСТОВЫЕ ДАННЫЕ

- [orders](/assets/data_orders.csv)
- [offers](/assets/data_offers.csv)

***

### ПРИМЕРЫ РЕШЕНИЙ

1. [Solution](/assets/solution_1.ipynb)
***

**[Назад](/analyst/README.md)**